# 基础知识
### 从输入URL到页面显示发生了什么? <Badge text="HTML"/>

在浏览器输入url后，浏览器主进程处理输入信息后开始导航，与网络进程通信，准备发起url请求，此时并不会直接发起请求，会首先查找本地缓存资源，如果有就返回资源给浏览器，没有的话就发起url请求。

总体来说分为以下几个过程:
1. DNS 解析:将域名解析成 IP 地址
2. TCP 连接：TCP 三次握手
3. 发送 HTTP 请求
4. 服务器处理请求并返回 HTTP 报文
5. 浏览器解析渲染页面
6. 断开连接：TCP 四次挥手

::: details 三次握手与四次挥手
**三次握手**
1. 客户端发送一个带数据包到服务器端口（第一次握手，由浏览器发起，告诉服务器我要发送请求了）
2. 服务器发回一个响应包以示传达确认信息（第二次握手，由服务器发起，告诉浏览器我准备接受了，  你赶紧发送吧）
3. 客户端再回传一个数据包，代表“握手结束”（第三次握手，由浏览器发送，告诉服务器，我马上就发了，准备接受吧）

**四次挥手**
1. 发起方向被动方发送报文，表示已经没有数据传输了。并进入 FIN_WAIT_1 状态。(第一次挥手：由浏览器发起的，发送给服务器，我请求报文发送完了，你准备关闭吧)
2. 被动方发送报文，表示同意关闭请求。此时主机发起方进入 FIN_WAIT_2 状态。(第二次挥手：由服务器发起的，告诉浏览器，我请求报文接受完了，我准备关闭了，你也准备吧)
3. 被动方向发起方发送报文段，请求关闭连接。并进入 LAST_ACK 状态。(第三次挥手：由服务器发起，告诉浏览器，我响应报文发送完了，你准备关闭吧)
4. 发起方向被动方发送报文段，然后进入等待 TIME_WAIT 状态。被动方收到发起方的报文段以后关闭连接。发起方等待一定时间未收到回复，则正常关闭。(第四次挥手：由浏览器发起，告诉服务器，我响应报文接受完了，我准备关闭了，你也准备吧)
:::

## 重绘和回流

**回流（Reflow）**

当渲染树`render tree`中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。这就称为**回流(reflow)**。每个页面至少需要一次回流，就是在页面第一次加载的时候，这时候是一定会发生回流的，因为要构建`render tree`。在回流的时候，浏览器会使渲染树中受到影响的部分失效，并重新构造这部分渲染树，完成回流后，浏览器会重新绘制受影响的部分到屏幕中，该过程称为**重绘**。

**简单来说，回流就是计算元素在设备内的确切位置和大小并且重新绘制**

**回流的代价要远大于重绘。并且回流必然会造成重绘，但重绘不一定会造成回流。**

**重绘（Repaint）**

当渲染树`render tree`中的一些元素需要更新样式，但这些样式属性只是改变元素的外观，风格，而不会影响布局的，比如`background-color`。则就叫称为**重绘(repaint)**。

**简单来说，重绘就是将渲染树节点转换为屏幕上的实际像素，不涉及重新布局阶段的位置与大小计算**

## BFC

简单来说就是，`BFC`是一个完全独立的空间（布局环境），让空间里的子元素不会影响到外面的布局。那么怎么使用`BFC`呢，`BFC`可以看做是一个`CSS`元素属性

这里简单列举几个触发`BFC`使用的`CSS`属性

- overflow: hidden
- display: inline-block
- position: absolute
- position: fixed
- display: table-cell
- display: flex

触发bfc可以解决flot，margin等脱离文档流导致高度塌陷的问题
